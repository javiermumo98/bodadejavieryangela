<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n ‚Äî Javier Murillo Mora√±o</title>
  <meta name="description" content="Invitaci√≥n de boda: Javier Murillo Mora√±o. Detalles y confirmaci√≥n." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fbf6fa;
      --paper:#ffffff;
      --ink:#141821;
      --muted:#6b7280;

      /* Sobre */
      --dusty:#e8c2d3;       /* rosa empolvado */
      --dusty2:#ddb0c6;
      --seal:#c7a25b;        /* dorado */
      --seal2:#b88f46;

      /* Acentos */
      --accent:#e85aa6;
      --accent2:#8a2158;
      --line:rgba(232,90,166,.16);

      --radius:26px;
      --shadow: 0 22px 80px rgba(16,24,40,.14);
      --shadow2: 0 14px 40px rgba(16,24,40,.12);
      --max: 1100px;

      --scenePad: clamp(16px, 2.2vw, 26px);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit}
    button{font:inherit}
    img{max-width:100%;display:block}

    /* =========================
       SCROLL POR ESCENAS
       ========================= */
    .app{
      min-height: 100vh;
    }

    .scroller{
      height: 100vh;
      overflow-y: auto;
      scroll-snap-type: y mandatory;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    .scene{
      scroll-snap-align: start;
      min-height: 100vh;
      display:grid;
      place-items:center;
      padding: var(--scenePad);
      position:relative;
      overflow:hidden;
    }

    .wrap{
      width:min(var(--max), 100%);
      display:grid;
      gap: 16px;
    }

    .card{
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .cardInner{
      padding: clamp(18px, 2.2vw, 26px);
      display:grid;
      gap: 14px;
    }

    .kicker{
      letter-spacing:.28em;
      text-transform:uppercase;
      font-size:12px;
      color: var(--muted);
      margin:0;
    }

    h1,h2,h3{
      font-family:"Playfair Display", serif;
      margin:0;
      letter-spacing:.02em;
    }

    h1{font-size: clamp(34px, 4.2vw, 62px); line-height:1.03}
    h2{font-size: clamp(24px, 3vw, 40px); line-height:1.08}
    h3{font-size: 20px}

    .muted{color:var(--muted); line-height:1.7; margin:0}

    .pillRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 6px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(232,90,166,.18);
      background: rgba(232,90,166,.08);
      color: var(--accent2);
      font-weight:800;
      font-size: 12px;
      letter-spacing:.12em;
      text-transform: uppercase;
    }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }
    .btn{
      border:1px solid rgba(232,90,166,.18);
      background:#fff;
      padding: 12px 15px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:900;
      font-size:13px;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition: transform 170ms ease, box-shadow 170ms ease;
    }
    .btn.primary{
      background: var(--accent);
      border-color: transparent;
      color:#fff;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: 0 14px 30px rgba(232,90,166,.16)}
    .btn:active{transform: translateY(1px)}

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 820px){ .grid2{grid-template-columns: 1fr;} }

    .panel{
      border:1px solid rgba(232,90,166,.14);
      border-radius: 20px;
      padding: 14px;
      background: linear-gradient(180deg, rgba(232,90,166,.06), rgba(232,90,166,0));
      position:relative;
      overflow:hidden;
    }

    .lineItem{
      display:flex;
      justify-content:space-between;
      gap:12px;
      padding: 10px 0;
      border-top: 1px dashed rgba(232,90,166,.22);
      font-size: 14px;
    }
    .lineItem:first-of-type{border-top:0}
    .lineItem b{font-weight:900}
    .lineItem span{color:var(--muted)}

    /* =========================
       FONDOS / FOTO / ATMOSFERA
       ========================= */
    .bgGlow::before{
      content:"";
      position:absolute; inset:-20%;
      background:
        radial-gradient(900px 380px at 35% 20%, rgba(232,90,166,.18), transparent 60%),
        radial-gradient(900px 420px at 80% 10%, rgba(199,162,91,.14), transparent 60%),
        radial-gradient(900px 520px at 60% 85%, rgba(232,90,166,.10), transparent 55%);
      pointer-events:none;
      filter: blur(0px);
    }

    .heroPhoto{
      height: min(58vh, 560px);
      border-radius: calc(var(--radius) + 6px);
      border: 1px solid rgba(232,90,166,.14);
      overflow:hidden;
      position:relative;
      box-shadow: var(--shadow2);
      background:
        linear-gradient(to top, rgba(0,0,0,.48), rgba(0,0,0,.14) 56%, rgba(0,0,0,0)),
        url("https://images.unsplash.com/photo-1529634897861-1d44b7b6b5cc?auto=format&fit=crop&w=1800&q=80");
      background-size:cover;
      background-position:center;
      filter: grayscale(14%) contrast(1.06);
    }
    .heroText{
      position:absolute;
      left: 18px; right: 18px; bottom: 18px;
      color:#fff;
      text-align:center;
      padding: 16px 14px;
      border-radius: 18px;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.30));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 16px 50px rgba(0,0,0,.22);
    }
    .names{
      font-family:"Playfair Display", serif;
      font-weight:700;
      font-size: clamp(34px, 3.2vw, 54px);
      margin: 0;
      line-height:1.02;
    }
    .eyebrow{
      letter-spacing:.28em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.9;
      margin:0 0 10px;
    }

    /* =========================
       RSVP
       ========================= */
    form{display:grid; gap:10px; margin-top:10px}
    input,select,textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(232,90,166,.18);
      outline:none;
      background:#fff;
      transition: box-shadow 200ms ease, border-color 200ms ease;
      font-size: 14px;
    }
    input:focus,select:focus,textarea:focus{
      border-color: rgba(232,90,166,.40);
      box-shadow: 0 0 0 4px rgba(232,90,166,.10);
    }
    textarea{min-height: 92px; resize:vertical}

    .ok,.err{
      display:none;
      border-radius:14px;
      padding:12px;
      font-weight:900;
      border:1px solid;
      margin-top:10px;
    }
    .ok{background: rgba(232,90,166,.10); color: var(--accent2); border-color: rgba(232,90,166,.22)}
    .err{background:#fff; color:#b42318; border-color: rgba(180,35,24,.35)}

    /* =========================
       DIBUJOS A MANO (SVG)
       Se ‚Äúdibujan‚Äù al entrar en escena
       ========================= */
    .doodle{
      position:absolute;
      pointer-events:none;
      opacity:.36;
      filter:saturate(.95);
    }
    .doodle.one{left:-34px; bottom:-38px; width:min(520px, 70vw); transform: rotate(-6deg);}
    .doodle.two{right:-46px; top:-44px; width:min(460px, 66vw); transform: rotate(10deg); opacity:.26;}
    .doodle.three{left:-30px; top:-40px; width:min(420px, 62vw); transform: rotate(-10deg); opacity:.22;}

    .draw path, .draw circle, .draw line, .draw polyline{
      stroke-dasharray: 1200;
      stroke-dashoffset: 1200;
      animation: none;
    }
    .scene.inview .draw path,
    .scene.inview .draw circle,
    .scene.inview .draw line,
    .scene.inview .draw polyline{
      animation: sketch 1.8s ease forwards;
    }
    .scene.inview .draw .delay1{animation-delay:.10s}
    .scene.inview .draw .delay2{animation-delay:.20s}
    .scene.inview .draw .delay3{animation-delay:.30s}
    .scene.inview .draw .delay4{animation-delay:.42s}
    @keyframes sketch{ to{stroke-dashoffset:0} }

    /* =========================
       ENTRADAS / TRANSICIONES DE CONTENIDO
       ========================= */
    .reveal{
      opacity:0;
      transform: translateY(16px);
      transition: opacity 800ms ease, transform 800ms ease;
    }
    .scene.inview .reveal{
      opacity:1;
      transform:none;
    }

    /* =========================
       SOBRE (pantalla inicial)
       ========================= */
    .envelopeOverlay{
      position:fixed;
      inset:0;
      z-index: 9999;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px 380px at 50% 20%, rgba(232,90,166,.18), transparent 60%),
        radial-gradient(900px 420px at 80% 10%, rgba(199,162,91,.16), transparent 60%),
        linear-gradient(180deg, #fff, rgba(255,255,255,0));
      padding: 22px;
    }

    .envWrap{
      width: min(520px, 94vw);
      position:relative;
      transform: translateY(8px);
      opacity:0;
      animation: envIn 700ms ease forwards;
    }
    @keyframes envIn{to{transform:none;opacity:1}}

    .envCard{
      position:relative;
      width:100%;
      aspect-ratio: 4 / 3;
      border-radius: 28px;
      box-shadow: var(--shadow);
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.45));
      border: 1px solid rgba(232,90,166,.14);
      backdrop-filter: blur(10px);
    }

    .envBack{
      position:absolute;
      inset: 18px 18px 18px 18px;
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(232,194,211,.92), rgba(221,176,198,.92));
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
    }

    /* La ‚Äúcarta‚Äù */
    .letter{
      position:absolute;
      left: 44px; right: 44px;
      bottom: 30px;
      height: 62%;
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 16px 45px rgba(16,24,40,.12);
      transform: translateY(60px);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      overflow:hidden;
    }
    .letter::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(600px 260px at 25% 10%, rgba(232,90,166,.12), transparent 60%),
        radial-gradient(600px 260px at 80% 20%, rgba(199,162,91,.10), transparent 60%);
      opacity:.8;
      pointer-events:none;
    }
    .letterInner{
      position:absolute;
      inset: 16px 16px 16px 16px;
      border-radius: 14px;
      border: 1px dashed rgba(232,90,166,.22);
      display:grid;
      place-items:center;
      text-align:center;
      padding: 10px;
    }
    .letterInner .t1{
      font-family:"Playfair Display", serif;
      font-weight:700;
      font-size: 28px;
      margin:0;
      color: var(--accent2);
    }
    .letterInner .t2{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 13px;
      letter-spacing:.14em;
      text-transform: uppercase;
      font-weight:800;
    }

    /* Cuerpo del sobre */
    .envBody{
      position:absolute;
      left: 18px; right: 18px;
      bottom: 18px;
      height: 64%;
      border-radius: 0 0 22px 22px;
      background: linear-gradient(180deg, rgba(232,194,211,.98), rgba(221,176,198,.98));
      border: 1px solid rgba(255,255,255,.22);
      overflow:hidden;
    }

    /* Tri√°ngulos del sobre */
    .envLeft, .envRight{
      position:absolute;
      bottom: 0;
      width: 50%;
      height: 100%;
      background: rgba(0,0,0,0);
    }
    .envLeft{
      left:0;
      clip-path: polygon(0 0, 0 100%, 100% 100%);
      background: linear-gradient(180deg, rgba(232,194,211,.98), rgba(221,176,198,.98));
      filter: brightness(.98);
    }
    .envRight{
      right:0;
      clip-path: polygon(100% 0, 0 100%, 100% 100%);
      background: linear-gradient(180deg, rgba(232,194,211,.98), rgba(221,176,198,.98));
      filter: brightness(.95);
    }

    /* Solapa (flap) que se levanta */
    .flap{
      position:absolute;
      left: 18px; right: 18px;
      top: 18px;
      height: 52%;
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.15,.9,.15,1);
      will-change: transform;
      border-radius: 22px 22px 14px 14px;
      overflow:hidden;
    }
    .flap::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(232,194,211,.98), rgba(221,176,198,.98));
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      filter: brightness(1.02);
      border-bottom: 1px solid rgba(255,255,255,.18);
    }

    /* Sello dorado (clicable) */
    .sealBtn{
      position:absolute;
      left:50%;
      top: 58%;
      transform: translate(-50%, -50%);
      width: 84px;
      height: 84px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,.28);
      background:
        radial-gradient(circle at 35% 30%, rgba(255,255,255,.55), transparent 45%),
        radial-gradient(circle at 70% 70%, rgba(0,0,0,.10), transparent 55%),
        linear-gradient(180deg, var(--seal), var(--seal2));
      box-shadow: 0 18px 48px rgba(0,0,0,.22);
      cursor:pointer;
      display:grid;
      place-items:center;
      color: rgba(255,255,255,.92);
      font-weight: 900;
      letter-spacing:.12em;
      text-transform: uppercase;
      transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease;
      z-index: 3;
    }
    .sealBtn:hover{
      transform: translate(-50%, -50%) scale(1.03);
      box-shadow: 0 20px 56px rgba(0,0,0,.24);
      filter: saturate(1.05);
    }
    .sealBtn:active{
      transform: translate(-50%, -50%) scale(.98);
    }
    .sealBtn small{
      display:block;
      font-weight: 800;
      font-size: 10px;
      letter-spacing:.22em;
      opacity:.9;
      margin-top: 2px;
    }

    /* Texto fuera del sobre */
    .envHint{
      text-align:center;
      margin-top: 14px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.6;
    }

    /* Estado ‚Äúabierto‚Äù */
    .envelopeOverlay.open .flap{
      transform: rotateX(165deg);
    }
    .envelopeOverlay.open .letter{
      transform: translateY(-10px);
    }
    .envelopeOverlay.open .sealBtn{
      pointer-events:none;
      transform: translate(-50%, -50%) scale(.94);
      opacity: .0;
      transition: opacity 300ms ease, transform 300ms ease;
    }

    /* Cuando termina, se desvanece el overlay */
    .envelopeOverlay.fadeOut{
      animation: overlayOut 520ms ease forwards;
    }
    @keyframes overlayOut{
      to{ opacity:0; visibility:hidden; }
    }

    /* Bloquea scroll mientras el sobre est√° */
    body.locked{overflow:hidden}

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important}
      .envelopeOverlay{background:#fff}
      .envelopeOverlay.open .flap{transform:none}
      .envelopeOverlay.open .letter{transform:none}
    }
  </style>
</head>

<body class="locked">
  <!-- =========================
       SOBRE (SIEMPRE AL ENTRAR)
       ========================= -->
  <div class="envelopeOverlay" id="envelopeOverlay" aria-hidden="false">
    <div class="envWrap">
      <div class="envCard" aria-label="Sobre de invitaci√≥n">
        <div class="envBack"></div>

        <div class="letter" aria-hidden="true">
          <div class="letterInner">
            <div>
              <p class="t1">04 ¬∑ 07 ¬∑ 2026</p>
              <p class="t2">Belalc√°zar</p>
            </div>
          </div>
        </div>

        <div class="envBody" aria-hidden="true">
          <div class="envLeft"></div>
          <div class="envRight"></div>
        </div>

        <div class="flap" aria-hidden="true"></div>

        <!-- Sello dorado (clic) -->
        <button class="sealBtn" id="sealBtn" type="button" aria-label="Abrir invitaci√≥n">
          JM
          <small>abrir</small>
        </button>
      </div>

      <div class="envHint">
        Pulsa el <b>sello dorado</b> para abrir la invitaci√≥n ‚ú®
      </div>
    </div>
  </div>

  <!-- =========================
       INVITACI√ìN (ESCENAS)
       ========================= -->
  <main class="app" id="app" aria-hidden="true">
    <div class="scroller" id="scroller">

      <!-- ESCENA 1: Portada -->
      <section class="scene bgGlow" id="s1">
        <!-- doodles hand-drawn (se dibujan al entrar) -->
        <svg class="doodle one draw" viewBox="0 0 520 520" fill="none" aria-hidden="true">
          <path class="delay1" d="M92 465c76-120 150-202 232-255" stroke="rgba(180,138,100,.95)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M132 488c46-128 132-274 254-348" stroke="rgba(180,138,100,.60)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M170 430c46-52 90-86 154-120" stroke="rgba(138,33,88,.28)" stroke-width="4" stroke-linecap="round"/>
          <path class="delay4" d="M290 215c15-22 30-22 45 0c-15 28-30 28-45 0Z" stroke="rgba(232,90,166,.85)" stroke-width="4" stroke-linejoin="round"/>
          <path class="delay3" d="M205 310c10-18 22-18 32 0c-10 20-22 20-32 0Z" stroke="rgba(199,162,91,.70)" stroke-width="3.6" stroke-linejoin="round"/>
        </svg>

        <svg class="doodle two draw" viewBox="0 0 520 520" fill="none" aria-hidden="true">
          <path class="delay1" d="M430 60c-60 120-152 212-262 288" stroke="rgba(180,138,100,.90)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M472 40c-30 116-146 294-292 366" stroke="rgba(180,138,100,.54)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M258 210c18-26 34-26 52 0c-18 32-34 32-52 0Z" stroke="rgba(232,90,166,.75)" stroke-width="4" stroke-linejoin="round"/>
        </svg>

        <div class="wrap">
          <div class="heroPhoto reveal">
            <div class="heroText">
              <p class="eyebrow">Junto a nuestras familias</p>
              <p class="names">Javier <span style="font-style:italic;opacity:.92">y</span> ‚Ä¶</p>
              <p class="muted" style="color:rgba(255,255,255,.88);margin-top:10px">
                Te invitamos a acompa√±arnos el d√≠a de nuestra boda.
              </p>
              <div class="pillRow" style="justify-content:center">
                <span class="pill" style="border-color:rgba(255,255,255,.20);background:rgba(232,90,166,.18);color:#fff">
                  04 ¬∑ 07 ¬∑ 2026
                </span>
                <span class="pill" style="border-color:rgba(255,255,255,.20);background:rgba(199,162,91,.18);color:#fff">
                  Belalc√°zar
                </span>
              </div>
            </div>
          </div>

          <div class="card reveal">
            <div class="cardInner">
              <p class="kicker">Desliza</p>
              <h2>Bienvenidos</h2>
              <p class="muted">
                Baja para ver escenas: eventos, detalles, autob√∫s, alergias y confirmaci√≥n (RSVP).
              </p>
              <div class="btnRow">
                <a class="btn primary" href="#s2">Empezar ‚¨á</a>
                <button class="btn" type="button" id="shareTop">Compartir üì≤</button>
              </div>
              <p class="muted" style="font-size:12px;margin-top:2px">
                (Si abres desde m√≥vil, puedes compartir el enlace directo desde aqu√≠.)
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- ESCENA 2: Eventos -->
      <section class="scene bgGlow" id="s2">
        <svg class="doodle three draw" viewBox="0 0 520 520" fill="none" aria-hidden="true">
          <path class="delay1" d="M110 120c120 30 210 92 280 190" stroke="rgba(199,162,91,.82)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M140 90c140 22 250 90 325 210" stroke="rgba(232,90,166,.52)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M170 150c18-26 34-26 52 0c-18 32-34 32-52 0Z" stroke="rgba(180,138,100,.90)" stroke-width="4" stroke-linejoin="round"/>
          <path class="delay4" d="M260 240c18-26 34-26 52 0c-18 32-34 32-52 0Z" stroke="rgba(138,33,88,.28)" stroke-width="4" stroke-linejoin="round"/>
        </svg>

        <div class="wrap">
          <div class="card reveal">
            <div class="cardInner">
              <p class="kicker">El d√≠a</p>
              <h2>Eventos</h2>

              <div class="grid2">
                <div class="panel">
                  <h3 style="margin:0 0 10px">Eucarist√≠a</h3>
                  <div class="lineItem"><b>Lugar</b><span>Belalc√°zar</span></div>
                  <div class="lineItem"><b>Hora</b><span>‚Äî</span></div>
                  <p class="muted" style="font-size:13px;margin:10px 0 0">
                    (Cuando me digas la hora, lo dejo perfecto.)
                  </p>
                </div>

                <div class="panel">
                  <h3 style="margin:0 0 10px">Cena / Celebraci√≥n</h3>
                  <div class="lineItem"><b>Lugar</b><span>Finca Rural El Soldado</span></div>
                  <div class="lineItem"><b>Hora</b><span>‚Äî</span></div>
                  <p class="muted" style="font-size:13px;margin:10px 0 0">
                    Incluimos c√≥ctel/fiesta si quieres.
                  </p>
                </div>
              </div>

              <div class="btnRow">
                <a class="btn" href="#s3">Detalles & mapas ‚ü∂</a>
                <a class="btn" href="#s4">Autob√∫s & alergias ‚ü∂</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ESCENA 3: Detalles + mapas -->
      <section class="scene bgGlow" id="s3">
        <svg class="doodle one draw" viewBox="0 0 520 520" fill="none" aria-hidden="true" style="opacity:.22">
          <path class="delay1" d="M96 470c72-120 146-200 230-250" stroke="rgba(180,138,100,.95)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M136 490c44-120 128-260 250-330" stroke="rgba(180,138,100,.58)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M175 430c44-50 86-80 150-110" stroke="rgba(232,90,166,.55)" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <div class="wrap">
          <div class="card reveal">
            <div class="cardInner">
              <p class="kicker">Informaci√≥n</p>
              <h2>Detalles & mapas</h2>

              <div class="grid2">
                <div class="panel">
                  <h3 style="margin:0 0 10px">Ceremonia</h3>
                  <div class="lineItem"><b>Belalc√°zar</b><span>Eucarist√≠a</span></div>
                  <div class="btnRow">
                    <a class="btn primary" target="_blank" rel="noopener" href="https://maps.google.com/?q=Belalc%C3%A1zar">Abrir mapa üó∫Ô∏è</a>
                  </div>
                  <p class="muted" style="font-size:13px;margin-top:10px">
                    Si me dices la iglesia exacta, pongo el enlace directo.
                  </p>
                </div>

                <div class="panel">
                  <h3 style="margin:0 0 10px">Cena</h3>
                  <div class="lineItem"><b>El Soldado</b><span>Finca Rural</span></div>
                  <div class="btnRow">
                    <a class="btn" target="_blank" rel="noopener" href="https://maps.google.com/?q=Finca+Rural+El+Soldado">Abrir mapa üó∫Ô∏è</a>
                    <button class="btn" type="button" id="addToCalendar">A√±adir al calendario üìå</button>
                  </div>
                  <p class="muted" style="font-size:13px;margin-top:10px">
                    El calendario ahora es ‚Äútodo el d√≠a‚Äù (hasta que pongamos horas).
                  </p>
                </div>
              </div>

              <div class="btnRow">
                <a class="btn" href="#s4">Autob√∫s & alergias ‚ü∂</a>
                <a class="btn" href="#s5">Confirmar (RSVP) ‚ü∂</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ESCENA 4: Bus + alergias -->
      <section class="scene bgGlow" id="s4">
        <svg class="doodle two draw" viewBox="0 0 520 520" fill="none" aria-hidden="true">
          <path class="delay1" d="M80 360c120-90 230-120 360-95" stroke="rgba(232,90,166,.62)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M100 390c140-110 270-150 410-120" stroke="rgba(199,162,91,.62)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M210 270c18-26 34-26 52 0c-18 32-34 32-52 0Z" stroke="rgba(180,138,100,.86)" stroke-width="4" stroke-linejoin="round"/>
        </svg>

        <div class="wrap">
          <div class="card reveal">
            <div class="cardInner">
              <p class="kicker">Log√≠stica</p>
              <h2>Autob√∫s & alergias</h2>

              <div class="grid2">
                <div class="panel">
                  <h3 style="margin:0 0 10px">Autob√∫s</h3>
                  <p class="muted" style="margin:0">
                    En la confirmaci√≥n podr√°s indicar si <b>quieres autob√∫s</b> o no.
                    As√≠ organizamos plazas y horarios.
                  </p>
                </div>

                <div class="panel">
                  <h3 style="margin:0 0 10px">Alergias / intolerancias</h3>
                  <p class="muted" style="margin:0">
                    Tambi√©n podr√°s escribir <b>alergias</b> o necesidades alimentarias.
                  </p>
                </div>
              </div>

              <div class="panel" style="margin-top:2px">
                <div class="lineItem"><b>Fecha l√≠mite RSVP</b><span>20 de junio</span></div>
                <p class="muted" style="font-size:13px;margin:10px 0 0">
                  (Si quieres, puedo hacer que despu√©s del 20 de junio el formulario avise que el plazo termin√≥.)
                </p>
              </div>

              <div class="btnRow">
                <a class="btn primary" href="#s5">Ir a confirmar ‚úÖ</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ESCENA 5: RSVP (Google Sheets) -->
      <section class="scene bgGlow" id="s5">
        <svg class="doodle one draw" viewBox="0 0 520 520" fill="none" aria-hidden="true" style="opacity:.20">
          <path class="delay1" d="M95 470c70-120 140-200 220-250" stroke="rgba(180,138,100,.95)" stroke-width="6" stroke-linecap="round"/>
          <path class="delay2" d="M140 490c40-120 120-260 240-330" stroke="rgba(232,90,166,.52)" stroke-width="5" stroke-linecap="round"/>
          <path class="delay3" d="M210 320c18-26 34-26 52 0c-18 32-34 32-52 0Z" stroke="rgba(199,162,91,.78)" stroke-width="4" stroke-linejoin="round"/>
        </svg>

        <div class="wrap">
          <div class="card reveal">
            <div class="cardInner">
              <p class="kicker">Confirmaci√≥n</p>
              <h2>RSVP</h2>
              <p class="muted">Por favor confirma antes del <b>20 de junio</b>.</p>

              <div class="ok" id="okMsg">‚úÖ ¬°Gracias! Hemos recibido tu confirmaci√≥n.</div>
              <div class="err" id="errMsg">‚ö†Ô∏è No se pudo enviar. Revisa la conexi√≥n o int√©ntalo otra vez.</div>

              <form id="rsvpForm">
                <input required name="name" placeholder="Nombre y apellidos" />
                <select required name="attendance">
                  <option value="" disabled selected>¬øAsistir√°s?</option>
                  <option value="S√≠">S√≠</option>
                  <option value="No">No</option>
                </select>

                <select required name="bus">
                  <option value="" disabled selected>¬øQuieres autob√∫s?</option>
                  <option value="S√≠, quiero autob√∫s">S√≠, quiero autob√∫s</option>
                  <option value="No, ir√© por mi cuenta">No, ir√© por mi cuenta</option>
                </select>

                <textarea name="allergies" placeholder="Alergias / intolerancias (ind√≠calas aqu√≠)"></textarea>
                <textarea name="notes" placeholder="Comentarios (opcional)"></textarea>

                <button class="btn primary" type="submit">Enviar confirmaci√≥n</button>
                <button class="btn" type="button" id="copyLink">Copiar enlace üîó</button>
              </form>

              <p class="muted" style="font-size:12px;margin-top:4px">
                *Este formulario se guarda en Google Sheets (cuando pegues la URL del Web App).
              </p>
            </div>
          </div>

          <div class="footer" style="text-align:center;color:var(--muted);font-size:12px;padding:6px 0 16px">
            04/07/2026 ¬∑ Con cari√±o
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    // =========================
    // CONFIG
    // Pega aqu√≠ la URL del Web App de Google Apps Script (Google Sheets).
    // Ejemplo: https://script.google.com/macros/s/AKfycb....../exec
    // =========================
    const GOOGLE_SHEETS_WEBAPP_URL = "PEGA_AQUI_TU_URL_DEL_WEB_APP";

    // =========================
    // SOBRE: abrir con sello (siempre)
    // =========================
    const envelopeOverlay = document.getElementById('envelopeOverlay');
    const sealBtn = document.getElementById('sealBtn');
    const app = document.getElementById('app');

    function openEnvelope(){
      envelopeOverlay.classList.add('open');

      // tras la animaci√≥n del flap + carta, desvanecemos overlay y habilitamos app
      setTimeout(() => {
        envelopeOverlay.classList.add('fadeOut');
      }, 980);

      setTimeout(() => {
        envelopeOverlay.setAttribute('aria-hidden','true');
        app.setAttribute('aria-hidden','false');
        document.body.classList.remove('locked');

        // arrancar ‚Äúinview‚Äù del primer frame visible
        triggerInview();
      }, 1250);
    }

    sealBtn.addEventListener('click', openEnvelope);

    // =========================
    // In-view: escenas + dibujo a mano + reveal
    // =========================
    const scenes = [...document.querySelectorAll('.scene')];

    const io = new IntersectionObserver((entries) => {
      entries.forEach((e) => {
        if (e.isIntersecting) {
          e.target.classList.add('inview');
        }
      });
    }, { threshold: 0.18 });

    scenes.forEach(s => io.observe(s));

    function triggerInview(){
      // fuerza el estado inview si la primera escena ya est√° en viewport
      const scroller = document.getElementById('scroller');
      const top = scroller.scrollTop;
      scenes.forEach(s=>{
        const r = s.getBoundingClientRect();
        // si visible (aprox)
        if (r.top < window.innerHeight * 0.75 && r.bottom > window.innerHeight * 0.25){
          s.classList.add('inview');
        }
      });
    }

    // =========================
    // Compartir / copiar enlace
    // =========================
    const shareTop = document.getElementById('shareTop');
    const copyLink = document.getElementById('copyLink');

    async function shareOrCopy(){
      const url = window.location.href;
      try{
        if (navigator.share){
          await navigator.share({ title: document.title, text: "Invitaci√≥n boda", url });
        } else {
          await navigator.clipboard.writeText(url);
          alert("Enlace copiado ‚úÖ");
        }
      }catch(e){}
    }

    shareTop?.addEventListener('click', shareOrCopy);

    copyLink?.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(window.location.href);
        alert("Enlace copiado ‚úÖ");
      }catch(e){
        alert("No pude copiar autom√°ticamente. Copia la URL del navegador.");
      }
    });

    // =========================
    // Calendario (placeholder sin horas)
    // =========================
    const addToCalendar = document.getElementById('addToCalendar');
    addToCalendar?.addEventListener('click', (e) => {
      e.preventDefault();

      const ics = [
        "BEGIN:VCALENDAR",
        "VERSION:2.0",
        "PRODID:-//Invitacion Boda//ES",
        "BEGIN:VEVENT",
        "UID:" + Date.now() + "@boda",
        "DTSTAMP:20260115T120000Z",
        "DTSTART;VALUE=DATE:20260704",
        "DTEND;VALUE=DATE:20260705",
        "SUMMARY:Boda ‚Äî Javier Murillo Mora√±o",
        "LOCATION:Belalc√°zar / Finca Rural El Soldado",
        "DESCRIPTION:Confirmaci√≥n antes del 20 de junio. ¬°Te esperamos!",
        "END:VEVENT",
        "END:VCALENDAR"
      ].join("\\r\\n");

      const blob = new Blob([ics], { type: "text/calendar;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "boda-javier-murillo-morano.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // =========================
    // RSVP -> Google Sheets
    // =========================
    const form = document.getElementById('rsvpForm');
    const okMsg = document.getElementById('okMsg');
    const errMsg = document.getElementById('errMsg');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      okMsg.style.display = "none";
      errMsg.style.display = "none";

      if (!GOOGLE_SHEETS_WEBAPP_URL || GOOGLE_SHEETS_WEBAPP_URL.includes("PEGA_AQUI")) {
        errMsg.textContent = "‚ö†Ô∏è Falta configurar la URL del Web App de Google Sheets.";
        errMsg.style.display = "block";
        return;
      }

      const payload = Object.fromEntries(new FormData(form).entries());
      payload.page = window.location.href;
      payload.userAgent = navigator.userAgent;

      try {
        const res = await fetch(GOOGLE_SHEETS_WEBAPP_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (!res.ok) throw new Error("HTTP " + res.status);
        const out = await res.json();

        if (out && out.ok) {
          okMsg.style.display = "block";
          form.reset();
          setTimeout(() => okMsg.style.display = "none", 5500);
        } else {
          throw new Error("Respuesta no ok");
        }
      } catch (err) {
        errMsg.style.display = "block";
      }
    });

    // =========================
    // Si alguien recarga, el sobre sale siempre (como pediste).
    // No guardamos nada en localStorage.
    // =========================
  </script>
</body>
</html>
